<div id="extract-question">
    <div tpsource="#extract-question-result"></div>
    <div class="tcenter mb10 mt10">
        <b class="cm-close-btn"></b>
    </div>
</div>

<script type="text/template" id="extract-question-result">
    <div class="jklb-div">
        <div class="child-title">{sjlb}</div>
        <div>{{jyzd:#<span class="common-field ellipsis" title="{jkzdmc}">{jkzdmc}</span><div class="colon">：</div><div class="result-txt-{extract}"><i class="icon-{extract}-sign"></i> <span>{jkResultTxt}</span></div><br class="hide{br}"/>#}}</div>
    </div>
</script>

<script>
    $style(top.path+'/dist/css/multiWin.css');
    var extractAction = top.path + '/api/0/xmjk/extract/extract';//进入数据抽取异常页面action

    //进入抽取异常页面
    function intoExtractQuestion(xmdwdm, win){
//        $open('#extract-question', {width:760, title:'数据抽取异常'});

        $get(extractAction, {xmdwdm:xmdwdm, flag: '0'}, function(res){
            $('#extract-question  div:first').template(res.data, function(item, i){
                item.jyzd.each(function(e, i){
                    if(e.jkResult == null || e.jkResult.isEmpty()){
                        e.jkResultTxt = '未知';
                        e.extract = 'question';
                    }else {
                        e.jkResultTxt = e.jkResult == '1' ? '正常' : '异常';
//                            e.extract = e.jkResult == '1' ? 'ok' : 'question';
                        e.extract = e.jkResult == '1' ? 'ok' : 'exclamation';
                    }
                    if((i+1)%4==0){
                        e.br = '1';
                    }
                });
                console.log(item);
            });
        },true);

        //关闭弹窗
        $('#extract-question').on('click', '.cm-close-btn', function(){
            win.$close();
        });

    }
</script>