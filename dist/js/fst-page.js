(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(require,module,exports){
module.exports={
  "海门":[121.15,31.89],
  "鄂尔多斯":[109.781327,39.608266],
  "招远":[120.38,37.35],
  "舟山":[122.207216,29.985295],
  "齐齐哈尔":[123.97,47.33],
  "盐城":[120.13,33.38],
  "赤峰":[118.87,42.28],
  "青岛":[120.33,36.07],
  "乳山":[121.52,36.89],
  "金昌":[102.188043,38.520089],
  "泉州":[118.58,24.93],
  "莱西":[120.53,36.86],
  "日照":[119.46,35.42],
  "胶南":[119.97,35.88],
  "南通":[121.05,32.08],
  "拉萨":[91.11,29.97],
  "云浮":[112.02,22.93],
  "梅州":[116.1,24.55],
  "文登":[122.05,37.2],
  "上海":[121.48,31.22],
  "攀枝花":[101.718637,26.582347],
  "威海":[122.1,37.5],
  "承德":[117.93,40.97],
  "厦门":[118.1,24.46],
  "汕尾":[115.375279,22.786211],
  "潮州":[116.63,23.68],
  "丹东":[124.37,40.13],
  "太仓":[121.1,31.45],
  "曲靖":[103.79,25.51],
  "烟台":[121.39,37.52],
  "福州":[119.3,26.08],
  "瓦房店":[121.979603,39.627114],
  "即墨":[120.45,36.38],
  "抚顺":[123.97,41.97],
  "玉溪":[102.52,24.35],
  "张家口":[114.87,40.82],
  "阳泉":[113.57,37.85],
  "莱州":[119.942327,37.177017],
  "湖州":[120.1,30.86],
  "汕头":[116.69,23.39],
  "昆山":[120.95,31.39],
  "宁波":[121.56,29.86],
  "湛江":[110.359377,21.270708],
  "揭阳":[116.35,23.55],
  "荣成":[122.41,37.16],
  "连云港":[119.16,34.59],
  "葫芦岛":[120.836932,40.711052],
  "常熟":[120.74,31.64],
  "东莞":[113.75,23.04],
  "河源":[114.68,23.73],
  "淮安":[119.15,33.5],
  "泰州":[119.9,32.49],
  "南宁":[108.33,22.84],
  "营口":[122.18,40.65],
  "惠州":[114.4,23.09],
  "江阴":[120.26,31.91],
  "蓬莱":[120.75,37.8],
  "韶关":[113.62,24.84],
  "嘉峪关":[98.289152,39.77313],
  "广州":[113.23,23.16],
  "延安":[109.47,36.6],
  "太原":[112.53,37.87],
  "清远":[113.01,23.7],
  "中山":[113.38,22.52],
  "昆明":[102.73,25.04],
  "寿光":[118.73,36.86],
  "盘锦":[122.070714,41.119997],
  "长治":[113.08,36.18],
  "深圳":[114.07,22.62],
  "珠海":[113.52,22.3],
  "宿迁":[118.3,33.96],
  "咸阳":[108.72,34.36],
  "铜川":[109.11,35.09],
  "平度":[119.97,36.77],
  "佛山":[113.11,23.05],
  "海口":[110.35,20.02],
  "江门":[113.06,22.61],
  "章丘":[117.53,36.72],
  "肇庆":[112.44,23.05],
  "大连":[121.62,38.92],
  "临汾":[111.5,36.08],
  "吴江":[120.63,31.16],
  "石嘴山":[106.39,39.04],
  "沈阳":[123.38,41.8],
  "苏州":[120.62,31.32],
  "茂名":[110.88,21.68],
  "嘉兴":[120.76,30.77],
  "长春":[125.35,43.88],
  "胶州":[120.03,36.2646],
  "银川":[106.27,38.47],
  "张家港":[120.5558,31.875],
  "三门峡":[111.19,34.76],
  "锦州":[121.15,41.13],
  "南昌":[115.89,28.68],
  "柳州":[109.4,24.33],
  "三亚":[109.5119,18.2528],
  "自贡":[104.778442,29.339],
  "吉林":[126.57,43.87],
  "阳江":[111.95,21.85],
  "泸州":[105.39,28.91],
  "西宁":[101.74,36.56],
  "宜宾":[104.56,29.77],
  "呼和浩特":[111.65,40.82],
  "成都":[104.06,30.67],
  "大同":[113.3,40.12],
  "镇江":[119.44,32.2],
  "桂林":[110.28,25.29],
  "张家界":[110.479191,29.117],
  "宜兴":[119.82,31.36],
  "北海":[109.12,21.49],
  "西安":[108.95,34.27],
  "金坛":[119.56,31.74],
  "东营":[118.49,37.46],
  "牡丹江":[129.58,44.6],
  "遵义":[106.9,27.7],
  "绍兴":[120.58,30.01],
  "扬州":[119.42,32.39],
  "常州":[119.95,31.79],
  "潍坊":[119.1,36.62],
  "重庆":[106.54,29.59],
  "台州":[121.420757,28.656],
  "南京":[118.78,32.04],
  "滨州":[118.03,37.36],
  "贵阳":[106.71,26.57],
  "无锡":[120.29,31.59],
  "克拉玛依":[84.77,45.59],
  "渭南":[109.5,34.52],
  "马鞍山":[118.48,31.56],
  "宝鸡":[107.15,34.38],
  "焦作":[113.21,35.24],
  "句容":[119.16,31.95],
  "北京":[116.46,39.92],
  "徐州":[117.2,34.26],
  "衡水":[115.72,37.72],
  "包头":[110,40.58],
  "绵阳":[104.73,31.48],
  "乌鲁木齐":[87.68,43.77],
  "枣庄":[117.57,34.86],
  "杭州":[120.19,30.26],
  "淄博":[118.05,36.78],
  "鞍山":[122.85,41.12],
  "溧阳":[119.48,31.43],
  "库尔勒":[86.06,41.68],
  "安阳":[114.35,36.1],
  "开封":[114.35,34.79],
  "济南":[117,36.65],
  "德阳":[104.37,31.13],
  "温州":[120.65,28.01],
  "九江":[115.97,29.71],
  "邯郸":[114.47,36.6],
  "临安":[119.72,30.23],
  "兰州":[103.73,36.03],
  "沧州":[116.83,38.33],
  "临沂":[118.35,35.05],
  "南充":[106.1107,30.8378],
  "天津":[117.2,39.13],
  "富阳":[119.95,30.07],
  "泰安":[117.13,36.18],
  "诸暨":[120.23,29.71],
  "郑州":[113.65,34.76],
  "哈尔滨":[126.63,45.75],
  "聊城":[115.97,36.45],
  "芜湖":[118.38,31.33],
  "唐山":[118.02,39.63],
  "平顶山":[113.29,33.75],
  "邢台":[114.48,37.05],
  "德州":[116.29,37.45],
  "济宁":[116.59,35.38],
  "荆州":[112.241,30.3352],
  "宜昌":[111.3,30.7],
  "义乌":[120.06,29.32],
  "丽水":[119.92,28.45],
  "洛阳":[112.44,34.7],
  "秦皇岛":[119.57,39.95],
  "株洲":[113.16,27.83],
  "石家庄":[114.48,38.03],
  "莱芜":[117.67,36.19],
  "常德":[111.69,29.05],
  "保定":[115.48,38.85],
  "湘潭":[112.91,27.87],
  "金华":[119.64,29.12],
  "岳阳":[113.09,29.37],
  "长沙":[113,28.21],
  "衢州":[118.88,28.97],
  "廊坊":[116.7,39.53],
  "菏泽":[115.48,35.234],
  "合肥":[117.27,31.86],
  "武汉":[114.31,30.52],
  "大庆":[125.03,46.58],

  "崇左":[107,23],
  "梧州":[111,23],
  "新乡":[113.5,35.18],
  "吉安":[114.58,27.07],
  "运城":[110.59,35.02],
  "吕梁":[111,37],
  "晋城":[112.5,35.3],
  "钦州":[108.37,21.57],
  "怀化":[109.58,27.33],
  "驻马店":[114.01,35.28],
  "南阳":[112.32,33],
  "鹤壁":[114.11,35.54],
  "上饶":[117.58,28.27],
  "淮南":[116.58,32.37],
  "本溪":[123.46,41.18],

  "北京大兴区":[116.4,39.8],
  "北京门头沟区":[116.5,39.4],
  "北京怀柔区":[116.75,40.15],
  "北京密云县":[116.9,40.3],

  "黑龙江省厅":[126.84,45.96],
  "吉林省厅":[125.56,44.09],
  "辽宁省厅":[123.59,42.01],
  "河北省厅":[114.69,38.24],
  "河南省厅":[113.86,34.97],
  "湖北省厅":[114.52,30.73],
  "湖南省厅":[113.21,28.42],
  "江西省厅":[116.10,28.89],
  "安徽省厅":[117.48,32.07],
  "江苏省厅":[118.99,32.25],
  "浙江省厅":[120.40,30.47],
  "福建省厅":[119.51,26.29],
  "贵州省厅":[106.92,26.78],
  "云南省厅":[102.94,25.25],
  "四川省厅":[104.27,30.88],
  "广西省厅":[108.54,23.05],
  "广东省厅":[113.53,23.46],
  "海南省厅":[110.56,20.21],
  "新疆省厅":[87.89,43.98],
  "西藏省厅":[91.32,30.18],
  "陕西省厅":[109.16,34.48],
  "甘肃省厅":[103.94,36.24],
  "宁夏省厅":[106.48,38.68],
  "青海省厅":[101.95,36.77],
  "内蒙古省厅":[111.86,41.03],
  "山东省厅":[117.21,36.84],
  "山西省厅":[112.74,38.06]
}
},{}],2:[function(require,module,exports){
/**
 * @created By YaoYiFeng
 * @date 2016-06-20 16:47:32
 *
 */

var geoData=require('../data/geo.json');
var fstMapAction = top.path+'/api/0/home/map';
var prjMngs;
var splitList;
importing('echarts3','china',function(){

    $get(fstMapAction,null,function(res){
        //console.info(res);
        var nodes=res.data.data||res.data.nodes;
        nodes=nodes.select('n=>{name:n.xmdwmc, value:n.xmjl}');
        //info(nodes)
        prjMngs=res.data.managers;
        splitList=prjMngs.select('o=>{start:o,end:o,label:o}');
        //log(splitList)
        mapInit(geoData, nodes);
    });

    //barInit();
    //pieInit();
    if(localParams.get('indexAnimation')){
        $('#main').animate({opacity:'0.1'},1200);
        setTimeout(function(){
            $('#main').animate({opacity:'1'},2400);
        },3000)
    }
});
function mapInit(geoData,nodes){
    var fcolor='steelblue';
    var convertData = function (data) {
        var res = [];
        for (var i = 0; i < data.length; i++) {
            var geoCoord = geoData[data[i].name];
            if (geoCoord) {
                res.push({
                    name: data[i].name,
                    value: geoCoord.concat(data[i].value)
                });
            }
        }
        return res;
    };

    option = {
        //backgroundColor: '#404a59',
        title: {
            text: '项目部署点一览',
            x:'center',
            textStyle: {
                color: fcolor
            }
        },
        tooltip: {
            trigger: 'item',
            //position:[25,0],//这是绝对位置,不是鼠标或节点相对位置
            formatter: function (params) {
                return params.name + ' : ' + params.value[2];
            }
        },
        //工具条
        toolbox: {
            show : false,
            orient : 'vertical',
            x: 'right',
            y: 'center',
            feature : {
                mark : {show: true},
                dataView : {show: false, readOnly: true},
                restore : {show: 1},
                saveAsImage : {show: 1}
            }
        },
        legend: {
            show:false,
            orient: 'horizontal',
            y: 'bottom',
            x:'right',
            data:['部署地'],
            textStyle: {color: fcolor}
        },
        dataRange: {
            //min: 0,
            //max: prjMngs.length-1,
            //x:'center',
            //y:'10px',
            //splitNumber:prjMngs.length,
            //calculable: true,
            //range:{start:'金满', end:'金满'},
            //selectedMode:'multiple',
            //orient: 'horizontal',
            color: ['red','#E26000','#482901','yellow','blue','purple','olive','green'],
            //text:prjMngs,
            textStyle: {color: '#222'},
            splitList: splitList,
            //borderColor:'transparent',
            //borderWidth:30
            padding:[0,0,30,20],
            itemWidth:30
        },
        //省份
        geo: {
            map: 'china',
            roam:true,//是否开启滚轮缩放和拖拽漫游，默认为false（关闭），其他有效输入为true（开启），'scale'（仅开启滚轮缩放），'move'（仅开启拖拽漫游）
            //scale: 2,
            //scaleSize:3,
            scaleLimit:{min:1.2, max:8},
            label: {
                normal: {show: true},//,textStyle: {color: '#fff'}},
                emphasis: {show: true}//,textStyle: {color: '#fff'}}
            },
            itemStyle: {
                normal: {
                    label:{show:true},//显示省份文字
                    borderColor:'gray',//省份边框颜色
                    areaColor:'rgba(210, 180, 140, 0.72)'// 'rgba(105,105,109,0.5)'
                },
                emphasis: {
                    label:{show:true},//显示省份文字
                    borderColor:'#1e90ff',
                    borderWidth: 1,
                    areaColor: 'tan'
                }
            }
        },
        //散列点
        series: [
            {
                name: '项目经理节点',
                type: 'scatter',
                coordinateSystem: 'geo',
                data: convertData(nodes),
                symbol:'pin',
                symbolSize: 24,
                label: {
                    normal: {show: false},
                    emphasis: {
                        show: true,
                        formatter:function(obj){return obj.name},
                        position:[25,0],
                        textStyle:{
                            color:'red',
                            fontSize:14
                        }
                    }
                },
                itemStyle: {
                    emphasis: {
                        borderColor: '#fff',
                        borderWidth: 8
                    }
                }
            }
        ]
    }
    var myChart = echarts3.init(byid('map-ct'));
    //启动
    window.onresize = myChart.resize;
    myChart.setOption(option);
    myChart.on('click', function (params) {
        log(params)
        if (params.componentType === 'markPoint') {
            // 点击到了 markPoint 上
            if (params.seriesIndex === 5) {
                // 点击到了 index 为 5 的 series 的 markPoint 上。
            }
        }
        else if (params.componentType === 'series') {
            if (params.seriesType === 'graph') {
                if (params.dataType === 'edge') {
                    // 点击到了 graph 的 edge（边）上。
                }
                else {
                    // 点击到了 graph 的 node（节点）上。
                }
            }
        }
    });
    //window.onmousewheel=function(){
    //        myChart.setOption({
    //            geo: {
    //                scaleLimit: {min: 0.5, max: 8}
    //            }
    //        });
    //};
}

function mapInit2(geoData){
    var stars=[{"name":"福建省厅","value":"111"},{"name":"江西省厅","value":"111"},{"name":"上饶","value":"111"},{"name":"吉安","value":"111"},{"name":"潍坊","value":"111"},{"name":"济宁","value":"111"},{"name":"河南省厅","value":"222"},{"name":"郑州","value":"111"},{"name":"鹤壁","value":"222"},{"name":"新乡","value":"111"},{"name":"南阳","value":"111"},{"name":"驻马店","value":"111"},{"name":"武汉","value":"111"},{"name":"宜昌","value":"111"},{"name":"湖南省厅","value":"111"},{"name":"怀化","value":"111"},{"name":"广东省厅","value":"111"},{"name":"广州","value":"222"},{"name":"深圳","value":"222"},{"name":"梅州","value":"222"},{"name":"云浮","value":"222"},{"name":"拉萨","value":"111"},{"name":"陕西省厅","value":"111"},{"name":"青海省厅","value":"111"},{"name":"西宁","value":"111"},{"name":"宁夏省厅","value":"111"},{"name":"梧州","value":"333"},{"name":"北海","value":"333"},{"name":"实施管理平台省厅","value":"111"},{"name":"山东省厅","value":"333"},{"name":"新疆省厅","value":"111"},{"name":"银川","value":"333"},{"name":"崇左","value":"333"},{"name":"上海","value":"333"},{"name":"重庆","value":"333"},{"name":"泸州","value":"333"},{"name":"贵州省厅","value":"111"},{"name":"广西省厅","value":"333"},{"name":"内蒙古省厅","value":"111"},{"name":"北京","value":"222"},{"name":"天津","value":"111"},{"name":"河北省厅","value":"222"},{"name":"石家庄","value":"222"},{"name":"秦皇岛","value":"222"},{"name":"山西省厅","value":"111"},{"name":"太原","value":"111"},{"name":"晋城","value":"111"},{"name":"吕梁","value":"111"},{"name":"临汾","value":"111"},{"name":"辽宁省厅","value":"111"},{"name":"沈阳","value":"111"},{"name":"本溪 ","value":"111"},{"name":"吉林省厅","value":"111"},{"name":"浙江省厅","value":"111"},{"name":"杭州","value":"111"},{"name":"芜湖","value":"111"},{"name":"淮南","value":"111"}];
    var histars=stars.where(/o=>o.value==111/);window.hicount=histars.length;
    var nostars=stars.where(/o=>o.value==0/);
    var yunstars=stars.where(/o=>o.value==222/);window.yuncount=yunstars.length;
    var getstars=stars.where(/o=>o.value==333/);window.getcount=getstars.length;
    var myChart = echarts2.init(byid('map-ct'));
    var option =  {
        //backgroundColor:'rgb(233,244,255)',
        //animation:true,
        //地图标题
        title : {
            text: '部署地一览',
            subtext: '',
            x:'center',
            textStyle : {color: '#999','fontSize':'24px'}
        },
        color: ['#FF6262','steelblue','green'],
        legend: {
            x:'center',
            y:'10%',
            selectedMode:'multiple',
            selected:{
                '一般部署地':yunstars.length+getstars.length<6,
                '云节点':true,
                '已握手节点':true
            },
            textStyle : {color: '#888','fontSize':'12px'},
            data:['一般部署地','云节点','已握手节点']
        },
        //移入提示
        tooltip : {
            show:false,
            trigger: 'item',
            formatter: '{b}'
        },
        dataRange: {
            show:true,
            min : 0,
            max : 333,
            splitNumber:4,
            calculable : false,//测量标尺 或是 分级色块
            text:['',''],
            //textStyle : {color: '#fff','fontSize':'12px'},
            color: ['green','#1E60C9','#e55','#E3D3AB']//max到min,由浅到深,最后面颜色应用到散列点和有数据的区域上
        },
        //工具条
        toolbox: {
            show : 1,
            orient : 'vertical',
            x: 'right',
            y: 'center',
            feature : {
                mark : {show: true},
                dataView : {show: false, readOnly: true},
                restore : {show: 1},
                saveAsImage : {show: 1}
            }
        },
        //层级系列--------------------------------------------------------------------------------------------------------------
        series : [

            //省份
            {
                name: '中国',
                type: 'map',
                mapType: 'china',
                selectedMode : 'multiple',
                //zlevel:0,//一级层叠控制
                //z:2,//二级层叠控制
                //clickable:false,
                //移入提示
                tooltip : {
                    show:false,
                    showDelay:50,
                    trigger: 'item',//'axis',
                    formatter:function(a,b,c){
                        return a.name + (a.value==0?' 暂无部署':'');
                    }//a是配置对象,b是name和index,c是function(e,t){return l.__setContent(e,t)}
                },
                //省份样式
                itemStyle:{
                    //普通
                    normal:{
                        label:{show:true},//显示省份文字
                        borderColor:'#ddd',//'rgb(100,199,237)',//省份边框颜色
                        borderWidth:1,
                        areaStyle:{color:'rgba(105,105,109,0.5)'}//function(obj){if(obj.data.value==1)return '#33e';}}//'rgba(105,105,109,0.5)'},// '#E1CDB2'}//'rgba(221,143,86,0.35)'} //省份背景色
                    },
                    //高亮
                    emphasis: {
                        borderColor:'rgb(100,199,237)',// '#1e90ff',
                        borderWidth: 1.5,
                        areaStyle:{color: 'rgba(221,143,86,0.15)'}
                    }
                },
                hoverable: true,//鼠标移入省份高亮
                roam:true,
                //未部署省份
                //data:nostars,
                data : [{name:'广东',value:1},{name:'广西',value:1},{name:'四川',value:1},{name:'重庆',value:1},{name:'宁夏',value:1},{name:'上海',value:1},{name:'河南',value:1},{name:'北京',value:1},{name:'河北',value:1},{name:'山东',value:1}],//nostars,
                // 坐标数据库
                geoCoord:geoData
            },

            //数据二 散列点----------------------------------------------------------------------------------------------------
            {
                //默认加在鼠标移入提示文字中
                name: '一般部署地',
                type: 'map',
                mapType: 'china',
                roam:true,
                zlevel:1,//层叠控制
                z:3,
                //数据视图
                data:[],
                //移入提示
                tooltip : {
                    show:true,
                    trigger: 'item',
                    formatter:function(a,b,c){
                        return a.name; //+ (a.value=='111'?'√已开通':'');
                    }//a是配置对象,b是name和index,c是function(e,t){return l.__setContent(e,t)}
                },
                /*markLine:{
                 lineWidth:5
                 },*/
                markPoint : {
                    //散列点图形(可用图片)
                    symbol:'star',//'emptyCircle',
                    //散列点尺寸
                    symbolSize : function (v){
                        return (7 + v/100);
                    },
                    //闪动效果
                    effect : {
                        show: false,
                        shadowBlur : 0,
                        color:'#FF6262', //不设置颜色的话,按数据级别显示对应颜色
                        scaleSize:1.1, //放大倍数
                        period:35//间隔时间
                    },
                    //指示文字
                    itemStyle:{
                        normal:{
                            label:{
                                show:false,
                                textStyle:{
                                    align:'left',
                                    baseline:'bottom',
                                    color:'navy',
                                    fontSize:'24px'//字号设置无效
                                },
                                formatter:' {b}'//{a}-{b}-{c} 散列点统称-散列点名称-散列点值
                            }
                        }
                    },
                    //云部署节点-----
                    data:histars
                }
            },

            //数据二 散列点----------------------------------------------------------------------------------------------------
            {
                //默认加在鼠标移入提示文字中
                name: '云节点',
                type: 'map',
                mapType: 'china',
                roam:true,
                zlevel:1,//层叠控制
                z:3,
                //数据视图
                data:[],
                //移入提示
                tooltip : {
                    show:true,
                    trigger: 'item',
                    formatter:function(a,b,c){
                        return a.name + (a.value=='222'?' 已开通,可申请握手':'');
                    }//a是配置对象,b是name和index,c是function(e,t){return l.__setContent(e,t)}
                },
                /*markLine:{
                 lineWidth:5
                 },*/
                markPoint : {
                    //散列点图形(可用图片)
                    symbol:'star',//'emptyCircle',
                    //散列点尺寸
                    symbolSize : function (v){return (9 + v/100);},
                    //闪动效果
                    effect : {
                        show: true,
                        shadowBlur : 0,
                        //color:'#e33', //不设置颜色的话,按数据级别显示对应颜色
                        scaleSize:1.1, //放大倍数
                        period:25//间隔时间
                    },
                    //指示文字
                    itemStyle:{
                        normal:{
                            label:{
                                show:false,
                                textStyle:{
                                    align:'left',
                                    baseline:'bottom',
                                    color:'navy',
                                    fontSize:'24px'//字号设置无效
                                },
                                formatter:' {b}'//{a}-{b}-{c} 散列点统称-散列点名称-散列点值
                            }
                        }
                    },
                    //云部署节点-----
                    data:yunstars
                }
            },

            //数据三 握手机制---
            {
                name: '已握手节点',
                type: 'map',
                mapType: 'china',
                roam:true,
                zlevel:1,//一级层叠控制
                z:3,//二级层叠控制
                data:[],
                tooltip : {
                    show:true,
                    trigger: 'item',
                    formatter:function(a,b,c){return a.name + (a.value=='333'?' √已握手!':'');}
                },
                markPoint : {
                    symbol:'star',//'emptyCircle',
                    symbolSize : function (v){ return (9 + v/100); },
                    effect : {
                        show: true,
                        scaleSize:1.1, //放大倍数
                        shadowBlur : 0,
                        period:25//间隔时间
                    },
                    itemStyle:{
                        normal:{
                            label:{
                                show:false,
                                textStyle:{
                                    align:'left',
                                    baseline:'bottom',
                                    color:'navy'
                                },
                                formatter:' {b}'//{a}-{b}-{c} 散列点统称-散列点名称-散列点值
                            }
                        }
                    },
                    //握手节点
                    data:getstars
                }
            }

        ]
    };
    //启动
    window.onresize = myChart.resize;
    myChart.setOption(option);
}

function barInit() {
    var option = {
        tooltip : {
            trigger: 'axis',
            axisPointer : {            // 坐标轴指示器，坐标轴触发有效
                type : 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
            }
        },
        legend: {
            data:['首页访问','客户端','云节点访问','串并案查询','一查通搜索','其他']
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        },
        xAxis : [
            {
                type : 'category',
                data : ['周一','周二','周三','周四','周五','周六','周日']
            }
        ],
        yAxis : [
            {
                type : 'value'
            }
        ],
        series : [
            {
                name:'首页访问',
                type:'bar',
                data:[320, 332, 301, 334, 390, 130, 120]
            },
            {
                name:'客户端',
                type:'bar',
                stack: '广告',
                data:[120, 132, 101, 134, 90, 130, 110]
            },
            {
                name:'云节点访问',
                type:'bar',
                stack: '广告',
                data:[220, 182, 191, 234, 290, 130, 110]
            },
            {
                name:'串并案查询',
                type:'bar',
                stack: '广告',
                data:[150, 232, 201, 154, 190, 30, 40]
            },
            {
                name:'一查通搜索',
                type:'bar',
                data:[862, 1018, 964, 1026, 1679, 100, 170],
                markLine : {
                    lineStyle: {
                        normal: {
                            type: 'dashed'
                        }
                    },
                    data : [
                        [{type : 'min'}, {type : 'max'}]
                    ]
                }
            },
            {
                name:'其他',
                type:'bar',
                stack: '搜索引擎',
                data:[62, 82, 91, 84, 109, 10, 10]
            }
        ]
    };
    var myChart = echarts.init(byid('bar-ct'));
    //window.onresize = myChart.resize;
    myChart.setOption(option);
}

function pieInit(){
    var option = {
        title : {
            text: '',
            subtext: '',
            x:'center'
        },
        tooltip : {
            trigger: 'item',
            formatter: "{a} <br/>{b} : {c} ({d}%)"
        },
        legend: {
            //orient: 'vertical',
            left: 'left',
            data: ['普通部署地','云部署地','握手云部署地'],
            show:false
        },
        series : [
            {
                name: '云部署情况',
                type: 'pie',
                radius : '55%',
                center: ['40%', '40%'],
                data:[
                    {value:hicount, name:'普通部署地'},
                    {value:yuncount, name:'云部署地'},
                    {value:getcount, name:'握手云部署地'}
                ],
                itemStyle: {
                    normal:{
                        color: function (obj){
                            var color;
                            var value=obj.data.value;
                            if(value==hicount) color= '#e66';
                            if(value==yuncount) color= 'steelblue';
                            if(value==getcount) color= 'green';
                            return color;
                            //return "#"+("00000"+((Math.random()*16777215+0.5)>>0).toString(16)).slice(-6);
                        }
                    },
                    emphasis: {
                        shadowBlur: 10,
                        shadowOffsetX: 0,
                        shadowColor: 'rgba(0, 0, 0, 0.5)'
                    }
                }
            }
        ]
    };
    var myChart = echarts.init(byid('pie-ct'));
    //window.onresize = myChart.resize;
    myChart.setOption(option);
    var app={currentIndex:-1};
    app.timeTicket = setInterval(function () {
        var dataLen = option.series[0].data.length;
        // 取消之前高亮的图形
        myChart.dispatchAction({
            type: 'downplay',
            seriesIndex: 0,
            dataIndex: app.currentIndex
        });
        app.currentIndex = (app.currentIndex + 1) % dataLen;
        // 高亮当前图形
        myChart.dispatchAction({
            type: 'highlight',
            seriesIndex: 0,
            dataIndex: app.currentIndex
        });
        // 显示 tooltip
        myChart.dispatchAction({
            type: 'showTip',
            seriesIndex: 0,
            dataIndex: app.currentIndex
        });
    }, 1000);
}

/**
 * @edited By YaoYiFeng
 * @date 2016-06-20 16:47:32
 */

},{"../data/geo.json":1}]},{},[2]);
